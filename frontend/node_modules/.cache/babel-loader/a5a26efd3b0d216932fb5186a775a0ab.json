{"ast":null,"code":"import _objectSpread from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"antd/dist/antd.css\";import{Form,Input,Button}from\"antd\";import{AutoComplete}from\"antd\";import{getProduct,getProductById}from\"../../API-services/product\";import{postVariant,getVariantById,updateVariant}from\"../../API-services/variant\";import{successModal,errorModal}from\"../../utilities/modal\";var layout={labelCol:{span:2},wrapperCol:{span:8}};var formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};var validateMessages={required:\"${label} is required!\"};var VariantForm=function VariantForm(props){var isMounted=true;var variantId=props.match.params.variantId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),autoCompleteOption=_useState2[0],setAutoCompleteOption=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),productId=_useState4[0],setProductId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),product=_useState6[0],setProduct=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),size=_useState10[0],setSize=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),color=_useState12[0],setColor=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),loading=_useState14[0],setLoading=_useState14[1];// const { register, handleSubmit, reset } = useForm();\n// {\n//   defaultValues: {\n//     Name: '',\n//     Size: '',\n//     Color: '',\n//   },\n// }\nvar _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];// let [description, setDescription] = useState('')\nvar onSelect=function onSelect(value,optionObject){setProductId(optionObject.id);};var onNameChange=function onNameChange(e){setName(e.target.value);};var onSizeChange=function onSizeChange(e){setSize(e.target.value);};var onColorChange=function onColorChange(e){setColor(e.target.value);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var payload,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isMounted){setLoading(true);}payload={name:name,size:size,color:color,product_id:productId};_context.prev=2;response={};if(!variantId){_context.next=10;break;}_context.next=7;return updateVariant(productId,payload);case 7:response=_context.sent;_context.next=13;break;case 10:_context.next=12;return postVariant(payload);case 12:response=_context.sent;case 13:if(response.status===200){successModal();}else{errorModal();}_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);errorModal();console.error(_context.t0);case 20:if(isMounted){setLoading(false);}case 21:case\"end\":return _context.stop();}}},_callee,null,[[2,16]]);}));return function onSubmit(){return _ref.apply(this,arguments);};}();var fetchProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getProduct(1,100);case 3:response=_context2.sent;result=[];if(response.status===200){result=response.data.data.products.map(function(product){return{id:product.id,value:product.name};});if(isMounted){setAutoCompleteOption(result);}}else{console.error(\"fail to fetch products\");}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function fetchProducts(){return _ref2.apply(this,arguments);};}();var fetchProductbyID=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId){var response,productData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getProductById(productId);case 3:response=_context3.sent;productData=response.data.data.product;setProduct(productData.name);form.setFieldsValue({Product:productData.name});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function fetchProductbyID(_x){return _ref3.apply(this,arguments);};}();var fetchVariant=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(variantId){var response,variantData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return getVariantById(variantId);case 3:response=_context4.sent;fetchProductbyID(response.data.data.variant.product_id);variantData=response.data.data.variant;if(variantId&&isMounted){setName(variantData.name);setSize(variantData.size);setProductId(variantData.product_id);setColor(variantData.color);form.setFieldsValue({Name:variantData.name,Size:variantData.size,Color:variantData.color});}else{}_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function fetchVariant(_x2){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchProducts();if(variantId){fetchVariant(variantId);}return function cleanup(){isMounted=false;};},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Variant Form\"),/*#__PURE__*/React.createElement(Form,Object.assign({},formItemLayout,{form:form,name:\"nest-messages\",validateMessages:validateMessages}),/*#__PURE__*/React.createElement(Form.Item,{name:\"Product\",label:\"Product\",rules:[{required:true}]},/*#__PURE__*/React.createElement(AutoComplete,{style:{width:200},options:autoCompleteOption,onSelect:onSelect,placeholder:\"Insert product name\",filterOption:function filterOption(inputValue,option){return option.value.toUpperCase().indexOf(inputValue.toUpperCase())!==-1;}})),/*#__PURE__*/React.createElement(Form.Item,{name:\"Name\",label:\"Name\",rules:[{required:true}]},/*#__PURE__*/React.createElement(Input,{value:name,onChange:onNameChange})),/*#__PURE__*/React.createElement(Form.Item,{name:\"Size\",label:\"Size\",rules:[]},/*#__PURE__*/React.createElement(Input,{value:size,onChange:onSizeChange})),/*#__PURE__*/React.createElement(Form.Item,{name:\"Color\",label:\"Color\",rules:[]},/*#__PURE__*/React.createElement(Input,{value:color,onChange:onColorChange})),/*#__PURE__*/React.createElement(Form.Item,{wrapperCol:_objectSpread(_objectSpread({},layout.wrapperCol),{},{offset:8})},/*#__PURE__*/React.createElement(Button,{type:\"primary\",loading:loading,onClick:onSubmit},\"Submit\"))));};export default VariantForm;","map":{"version":3,"sources":["/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/src/pages/Variant/Form.jsx"],"names":["React","useState","useEffect","Form","Input","Button","AutoComplete","getProduct","getProductById","postVariant","getVariantById","updateVariant","successModal","errorModal","layout","labelCol","span","wrapperCol","formItemLayout","xs","sm","validateMessages","required","VariantForm","props","isMounted","variantId","match","params","autoCompleteOption","setAutoCompleteOption","productId","setProductId","product","setProduct","name","setName","size","setSize","color","setColor","loading","setLoading","useForm","form","onSelect","value","optionObject","id","onNameChange","e","target","onSizeChange","onColorChange","onSubmit","payload","product_id","response","status","console","error","fetchProducts","result","data","products","map","log","fetchProductbyID","productData","setFieldsValue","Product","fetchVariant","variant","variantData","Name","Size","Color","cleanup","width","inputValue","option","toUpperCase","indexOf","offset"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { Form, Input, Button } from \"antd\";\nimport { AutoComplete } from \"antd\";\nimport { \n  getProduct, \n  getProductById \n} from \"../../API-services/product\";\nimport {\n  postVariant,\n  getVariantById,\n  updateVariant,\n} from \"../../API-services/variant\";\nimport { successModal, errorModal } from \"../../utilities/modal\";\n\nconst layout = {\n  labelCol: {\n    span: 2,\n  },\n  wrapperCol: {\n    span: 8,\n  },\n};\n\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 8 },\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 16 },\n  },\n};\n\n\nconst validateMessages = {\n  required: \"${label} is required!\",\n};\n\nconst VariantForm = (props) => {\n  let isMounted = true;\n  let variantId = props.match.params.variantId;\n  let [autoCompleteOption, setAutoCompleteOption] = useState([]);\n  let [productId, setProductId] = useState(\"\");\n  let [product, setProduct] = useState(\"\");\n  let [name, setName] = useState(\"\");\n  let [size, setSize] = useState(\"\");\n  let [color, setColor] = useState(\"\");\n  let [loading, setLoading] = useState(false);\n  // const { register, handleSubmit, reset } = useForm();\n  // {\n  //   defaultValues: {\n  //     Name: '',\n  //     Size: '',\n  //     Color: '',\n  //   },\n  // }\n\n  const [form] = Form.useForm();\n  // let [description, setDescription] = useState('')\n\n  const onSelect = (value, optionObject) => {\n    setProductId(optionObject.id);\n  };\n\n  const onNameChange = (e) => {\n    setName(e.target.value);\n  };\n\n  const onSizeChange = (e) => {\n    setSize(e.target.value);\n  };\n\n  const onColorChange = (e) => {\n    setColor(e.target.value);\n  };\n\n  const onSubmit = async () => {\n    if (isMounted) {\n      setLoading(true);\n    }\n\n    const payload = {\n      name,\n      size,\n      color,\n      product_id: productId,\n    };\n    try {\n      let response = {};\n\n      if (variantId) {\n        response = await updateVariant(productId, payload);\n      } else {\n        response = await postVariant(payload);\n      }\n      if (response.status === 200) {\n        successModal();\n      } else {\n        errorModal();\n      }\n    } catch (error) {\n      errorModal();\n      console.error(error);\n    }\n    if (isMounted) {\n      setLoading(false);\n    }\n    \n  };\n\n  const fetchProducts = async () => {\n    try {\n      let response = await getProduct(1, 100);\n      let result = [];\n      if (response.status === 200) {\n        result = response.data.data.products.map((product) => ({\n          id: product.id,\n          value: product.name,\n        }));\n        if (isMounted) {\n          setAutoCompleteOption(result);\n        }\n\n      } else {\n        console.error(\"fail to fetch products\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const fetchProductbyID = async (productId) => {\n    try {\n      let response = await getProductById(productId);\n      let productData = response.data.data.product;\n      setProduct(productData.name);\n      form.setFieldsValue({\n        Product: productData.name\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchVariant = async (variantId) => {\n    try {\n      let response = await getVariantById(variantId);\n      fetchProductbyID(response.data.data.variant.product_id)\n\n      let variantData = response.data.data.variant;\n      if (variantId && isMounted) {\n        setName(variantData.name);\n        setSize(variantData.size);\n        setProductId(variantData.product_id);\n        setColor(variantData.color);\n\n        form.setFieldsValue({\n          Name: variantData.name,\n          Size: variantData.size,\n          Color: variantData.color,\n        });\n      } else {\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n    if (variantId) {\n      fetchVariant(variantId);\n    }\n\n    return function cleanup() {\n      isMounted = false;\n    };\n  }, []);\n\n  return (\n    <>\n      <h1>Variant Form</h1>\n\n      <Form\n        {...formItemLayout}\n        form={form}\n        name=\"nest-messages\"\n        validateMessages={validateMessages}\n      >\n        <Form.Item\n          name=\"Product\"\n          label=\"Product\"\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n        >\n          <AutoComplete\n            style={{\n              width: 200,\n            }}\n            options={autoCompleteOption}\n            onSelect={onSelect}\n            placeholder=\"Insert product name\"\n            filterOption={(inputValue, option) =>\n              option.value.toUpperCase().indexOf(inputValue.toUpperCase()) !==\n              -1\n            }\n          />\n        </Form.Item>\n        <Form.Item\n          name=\"Name\"\n          label=\"Name\"\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n        >\n          <Input value={name} onChange={onNameChange} />\n        </Form.Item>\n        <Form.Item\n          name=\"Size\"\n          label=\"Size\"\n          rules={[]}\n        >\n          <Input value={size} onChange={onSizeChange} />\n        </Form.Item>\n        <Form.Item\n          name=\"Color\"\n          label=\"Color\"\n          rules={[\n            ]}\n        >\n          <Input value={color} onChange={onColorChange} />\n        </Form.Item>\n       \n        <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 8 }}>\n          <Button type=\"primary\" loading={loading} onClick={onSubmit}>\n            Submit\n          </Button>\n        </Form.Item>\n      </Form>\n    </>\n  );\n};\n\nexport default VariantForm;\n"]},"metadata":{},"sourceType":"module"}