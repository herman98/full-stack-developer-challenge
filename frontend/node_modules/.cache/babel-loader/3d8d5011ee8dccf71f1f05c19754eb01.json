{"ast":null,"code":"import _regeneratorRuntime from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{getVariant}from\"../../API-services/variant\";import{EntityVariant as Variant}from\"../../components/Entity\";import{Pagination}from\"antd\";var List=function List(){var isMounted=true;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),variants=_useState2[0],setVariants=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),paging=_useState4[0],setPaging=_useState4[1];var fetchVariants=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page,perPage){var response,result,paginationAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getVariant(page,perPage);case 3:response=_context.sent;result=[];paginationAttribute={};if(response.status===200){result=response.data.data.variants.map(function(variant){return{id:variant.id,name:variant.name,product_id:variant.product_id};});paginationAttribute=response.data.data.paging;if(isMounted){setVariants(result);setPaging({currentPage:paginationAttribute.current_page,total:paginationAttribute.count});}}else{console.error(\"fail to fetch variants\");}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchVariants(_x,_x2){return _ref.apply(this,arguments);};}();var onPaginationChange=function onPaginationChange(page,pageSize){fetchVariants(page,pageSize);};useEffect(function(){fetchVariants(1,10);return function cleanup(){isMounted=false;};},[]);return/*#__PURE__*/React.createElement(\"div\",{style:{position:\"relative\",paddingBottom:72}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Variant List\"),variants.map(function(variant,index){return/*#__PURE__*/React.createElement(Variant,{key:index,name:variant.name,size:variant.size,color:variant.color,detailUrl:\"/variant/detail/\".concat(variant.id),editUrl:\"/variant/\".concat(variant.id),parentID:variant.product_id});})),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\",position:\"absolute\",bottom:0,display:\"flex\",justifyContent:\"center\"}},/*#__PURE__*/React.createElement(Pagination,{defaultCurrent:1,total:paging.total,current:paging.currentPage,pageSize:10,onChange:onPaginationChange})));};export default List;","map":{"version":3,"sources":["/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/src/pages/Variant/List.jsx"],"names":["React","useState","useEffect","getVariant","EntityVariant","Variant","Pagination","List","isMounted","variants","setVariants","paging","setPaging","fetchVariants","page","perPage","response","result","paginationAttribute","status","data","map","variant","id","name","product_id","currentPage","current_page","total","count","console","error","log","onPaginationChange","pageSize","cleanup","position","paddingBottom","index","size","color","width","bottom","display","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getVariant } from \"../../API-services/variant\";\nimport { EntityVariant as Variant }  from \"../../components/Entity\";\nimport { Pagination } from \"antd\";\n\nconst List = () => {\n  let isMounted = true;\n  let [variants, setVariants] = useState([]);\n  let [paging, setPaging] = useState({});\n\n  const fetchVariants = async (page, perPage) => {\n    try {\n      let response = await getVariant(page, perPage);\n      let result = [];\n      let paginationAttribute = {};\n      if (response.status === 200) {\n        result = response.data.data.variants.map((variant) => ({\n          id: variant.id,\n          name: variant.name,\n          product_id: variant.product_id,\n        }));\n        paginationAttribute = response.data.data.paging;\n        if (isMounted) {\n          setVariants(result);\n          setPaging({\n            currentPage: paginationAttribute.current_page,\n            total: paginationAttribute.count,\n          });\n        }\n      } else {\n        console.error(\"fail to fetch variants\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const onPaginationChange = (page, pageSize) => {\n    fetchVariants(page, pageSize)\n  }\n\n  useEffect(() => {\n    fetchVariants(1, 10);\n\n    return function cleanup() {\n      isMounted = false;\n    };\n  }, []);\n\n  return (\n    <div style={{ position: \"relative\", paddingBottom: 72 }}>\n      <div>\n        <h1>Variant List</h1>\n        {variants.map((variant, index) => {\n          return (\n            <Variant\n              key={index}\n              name={variant.name}\n              size={variant.size}\n              color={variant.color}\n              detailUrl={`/variant/detail/${variant.id}`}\n              editUrl={`/variant/${variant.id}`}\n              parentID={variant.product_id}\n            />\n          );\n        })}\n      </div>\n      <div\n        style={{\n          width: \"100%\",\n          position: \"absolute\",\n          bottom: 0,\n          display: \"flex\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Pagination\n          defaultCurrent={1}\n          total={paging.total}\n          current={paging.currentPage}\n          pageSize={10}\n          onChange={onPaginationChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}