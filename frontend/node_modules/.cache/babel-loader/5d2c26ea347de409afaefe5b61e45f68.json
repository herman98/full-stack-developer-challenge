{"ast":null,"code":"import _regeneratorRuntime from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{getProduct}from\"../../API-services/product\";import{Entity as Product}from\"../../components/Entity\";import{Pagination}from\"antd\";var List=function List(){var isMounted=true;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),paging=_useState4[0],setPaging=_useState4[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page,perPage){var response,result,paginationAttribute;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getProduct(page,perPage);case 3:response=_context.sent;result=[];paginationAttribute={};if(response.status===200){result=response.data.data.products.map(function(product){return{id:product.id,name:product.name,description:product.description,logo:product.logo.url};});paginationAttribute=response.data.data.paging;if(isMounted){setProducts(result);setPaging({currentPage:paginationAttribute.current_page,total:paginationAttribute.count});}}else{console.error(\"fail to fetch products\");}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchProducts(_x,_x2){return _ref.apply(this,arguments);};}();var onPaginationChange=function onPaginationChange(page,pageSize){fetchProducts(page,pageSize);};useEffect(function(){fetchProducts(1,10);return function cleanup(){isMounted=false;};},[]);return/*#__PURE__*/React.createElement(\"div\",{style:{position:\"relative\",paddingBottom:72}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{fontSize:32}},\"Product List\"),products.map(function(product,index){return/*#__PURE__*/React.createElement(Product,{key:index,name:product.name,logo:product.logo,description:product.description,detailUrl:\"/product/detail/\"+product.id,editUrl:\"/product/\".concat(product.id)});})),/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\",position:\"absolute\",bottom:0,display:\"flex\",justifyContent:\"center\"}},/*#__PURE__*/React.createElement(Pagination,{defaultCurrent:1,total:paging.total,current:paging.currentPage,pageSize:10,onChange:onPaginationChange})));};export default List;","map":{"version":3,"sources":["/home/herman3g/learn/sourcesage/full-stack-developer-challenge/frontend/src/pages/Product/List.jsx"],"names":["React","useState","useEffect","getProduct","Entity","Product","Pagination","List","isMounted","products","setProducts","paging","setPaging","fetchProducts","page","perPage","response","result","paginationAttribute","status","data","map","product","id","name","description","logo","url","currentPage","current_page","total","count","console","error","log","onPaginationChange","pageSize","cleanup","position","paddingBottom","fontSize","index","width","bottom","display","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getProduct } from \"../../API-services/product\";\nimport {Entity as Product} from \"../../components/Entity\";\nimport { Pagination } from \"antd\";\n\nconst List = () => {\n  let isMounted = true;\n  let [products, setProducts] = useState([]);\n  let [paging, setPaging] = useState({});\n\n  const fetchProducts = async (page, perPage) => {\n    try {\n      let response = await getProduct(page, perPage);\n      let result = [];\n      let paginationAttribute = {};\n      if (response.status === 200) {\n        result = response.data.data.products.map((product) => ({\n          id: product.id,\n          name: product.name,\n          description: product.description,\n          logo: product.logo.url,\n        }));\n        paginationAttribute = response.data.data.paging;\n        if (isMounted) {\n          setProducts(result);\n          setPaging({\n            currentPage: paginationAttribute.current_page,\n            total: paginationAttribute.count,\n          });\n        }\n      } else {\n        console.error(\"fail to fetch products\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  \n  const onPaginationChange = (page, pageSize) => {\n    fetchProducts(page, pageSize)\n  }\n\n  useEffect(() => {\n    fetchProducts(1, 10);\n\n    return function cleanup() {\n      isMounted = false;\n    };\n  }, []);\n\n  return (\n    <div style={{ position: \"relative\", paddingBottom: 72 }}>\n      <div>\n        <h1 style={{fontSize: 32}}>Product List</h1>\n        {products.map((product, index) => {\n          return (\n            <Product\n              key={index}\n              name={product.name}\n              logo={product.logo}\n              description={product.description}\n              detailUrl={\"/product/detail/\" + product.id}\n              editUrl={`/product/${product.id}`}\n            />\n          );\n        })}\n      </div>\n      <div\n        style={{\n          width: \"100%\",\n          position: \"absolute\",\n          bottom: 0,\n          display: \"flex\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Pagination\n          defaultCurrent={1}\n          total={paging.total}\n          current={paging.currentPage}\n          pageSize={10}\n          onChange={onPaginationChange}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default List;\n"]},"metadata":{},"sourceType":"module"}